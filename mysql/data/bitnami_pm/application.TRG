TYPE=TRIGGERS
triggers='CREATE DEFINER=`bn_processmaker`@`127.0.0.1` TRIGGER APPLICATION_UPDATE BEFORE UPDATE ON APPLICATION\n\nFOR EACH ROW\n\nBEGIN\n  DECLARE APP_STATUS VARCHAR(32);\n  DECLARE APP_FINISH_DATE DATETIME;\n\n  SELECT APPLICATION.APP_STATUS into @APP_STATUS FROM APPLICATION WHERE APP_UID = NEW.APP_UID LIMIT 1;\n\n  IF(OLD.APP_STATUS<>NEW.APP_STATUS) THEN\n    SET @APP_STATUS = NEW.APP_STATUS;\n    UPDATE APP_CACHE_VIEW SET APP_STATUS = @APP_STATUS WHERE APP_UID = NEW.APP_UID;\n  END IF;\n\n  IF(OLD.APP_DATA<>NEW.APP_DATA) THEN\n      UPDATE APP_CACHE_VIEW SET APP_UPDATE_DATE = NEW.APP_UPDATE_DATE WHERE APP_UID = NEW.APP_UID;\n  END IF;\n\n  IF (NEW.APP_STATUS = \'COMPLETED\') THEN\n      UPDATE APP_CACHE_VIEW SET APP_FINISH_DATE = NEW.APP_FINISH_DATE WHERE APP_UID = NEW.APP_UID;\n      UPDATE APP_CACHE_VIEW SET APP_UPDATE_DATE = NEW.APP_UPDATE_DATE WHERE APP_UID = NEW.APP_UID;\n  END IF;\nEND' 'CREATE DEFINER=`bn_processmaker`@`127.0.0.1` TRIGGER APPLICATION_DELETE BEFORE DELETE ON APPLICATION\n FOR EACH ROW BEGIN\n  DELETE FROM APP_CACHE_VIEW WHERE APP_UID = OLD.APP_UID; \nEND'
sql_modes=0 0
definers='bn_processmaker@127.0.0.1' 'bn_processmaker@127.0.0.1'
client_cs_names='utf8' 'utf8'
connection_cl_names='utf8_general_ci' 'utf8_general_ci'
db_cl_names='utf8_general_ci' 'utf8_general_ci'
